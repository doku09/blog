# ✏️ 학습내용

## File,Files

### 옛날에 파일을 핸들링하기 위해 사용한 File 클래스
```java
public class OldFileMain {
    public static void main(String[] args) throws IOException {
        File file = new File("temp/example.txt");
        File directory = new File("temp/exampleDir");
        // 1. exists(): 파일이나 디렉토리의 존재 여부를 확인
        System.out.println("File exists: " + file.exists());
        // 2. createNewFile(): 새 파일을 생성
        boolean created = file.createNewFile();
        System.out.println("File created: " + created);
        // 3. mkdir(): 새 디렉토리를 생성
        boolean dirCreated = directory.mkdir();
        System.out.println("Directory created: " + dirCreated);
        // 4. delete(): 파일이나 디렉토리를 삭제
        //boolean deleted = file.delete();
        //System.out.println("File deleted: " + deleted);
        // 5. isFile(): 파일인지 확인
        System.out.println("Is file: " + file.isFile());
        // 6. isDirectory(): 디렉토리인지 확인
        System.out.println("Is directory: " + directory.isDirectory());
        // 7. getName(): 파일이나 디렉토리의 이름을 반환
        System.out.println("File name: " + file.getName());
        // 8. length(): 파일의 크기를 바이트 단위로 반환
        System.out.println("File size: " + file.length() + " bytes");
        // 9. renameTo(File dest): 파일의 이름을 변경하거나 이동
        File newFile = new File("temp/newExample.txt");
        boolean renamed = file.renameTo(newFile);
        System.out.println("File renamed: " + renamed);
        // 10. lastModified(): 마지막으로 수정된 시간을 반환
        long lastModified = newFile.lastModified();
        System.out.println("Last modified: " + new Date(lastModified));
    }
}
```
이런 기능위주의 클래스는 외우지 말고 이런게 있다 정도만 알아두고 나머지는 필요할때 검색해서 사용하자

## Files
자바는 1.7에서 `File` 클래스를 개선하여 `Files`와 `Path` 클래스가 등장하였다.

```java
public class NewFilesMain {
	public static void main(String[] args) throws IOException {
		Path file = Path.of("temp/example.txt");
		Path directory = Path.of("temp/exampleDir");
		// 1. exists(): 파일이나 디렉토리의 존재 여부를 확인
		System.out.println("File exists: " + Files.exists(file));
		// 2. createFile(): 새 파일을 생성
		try {
			Files.createFile(file);
			System.out.println("File created");
		} catch (FileAlreadyExistsException e) {
			System.out.println(file + " File already exists");
		}
		// 3. createDirectory(): 새 디렉토리를 생성
		try {
			Files.createDirectory(directory);
			System.out.println("Directory created");
		} catch (FileAlreadyExistsException e) {
			System.out.println(directory + " Directory already exists");
		}
		// 4. delete(): 파일이나 디렉토리를 삭제
		//Files.delete(file);
		//System.out.println("File deleted");
		// 5. isRegularFile(): 일반 파일인지 확인
		System.out.println("Is regular file: " + Files.isRegularFile(file));
		// 6. isDirectory(): 디렉토리인지 확인
		System.out.println("Is directory: " + Files.isDirectory(directory));
		// 7. getFileName(): 파일이나 디렉토리의 이름을 반환
		System.out.println("File name: " + file.getFileName());
		// 8. size(): 파일의 크기를 바이트 단위로 반환
		System.out.println("File size: " + Files.size(file) + " bytes");
		// 9. move(): 파일의 이름을 변경하거나 이동
		Path newFile = Paths.get("temp/newExample.txt");
		Files.move(file, newFile, StandardCopyOption.REPLACE_EXISTING);
		System.out.println("File moved/renamed");
		// 10. getLastModifiedTime(): 마지막으로 수정된 시간을 반환
		System.out.println("Last modified: " +
			Files.getLastModifiedTime(newFile));
		// 추가: readAttributes(): 파일의 기본 속성들을 한 번에 읽기
		BasicFileAttributes attrs = Files.readAttributes(newFile,
			BasicFileAttributes.class);
		System.out.println("===== Attributes =====");
		System.out.println("Creation time: " + attrs.creationTime());
		System.out.println("Is directory: " + attrs.isDirectory());
		System.out.println("Is regular file: " + attrs.isRegularFile());
		System.out.println("Is symbolic link: " + attrs.isSymbolicLink());
		System.out.println("Size: " + attrs.size());
	}
}
```

## 경로표시
### 옛날 버전 Path
```java
public class OldFilePath {

	public static void main(String[] args) throws IOException {
		File file = new File("temp/..");
		System.out.println("path = " + file.getPath());
		// 절대 경로
		System.out.println("Absolute path = " + file.getAbsolutePath()); // C:\inflearn\younghan\java\practice-java-adv2\temp\..

		// 정규 경로
		System.out.println("Canonical path = " + file.getCanonicalPath()); // C:\inflearn\younghan\java\practice-java-adv2

		File[] files = file.listFiles();
		for (File f : files) {
			System.out.println((f.isFile() ? "F" : "D") + " | " + f.getName());
		}
	}
}
```
### 최신 버전 Path
```java
public class NewFilesPath {
	public static void main(String[] args) throws IOException {
		Path path = Path.of("temp/..");
		System.out.println("path = " + path);

		// 절대 경로
		System.out.println("Absolute path = " + path.toAbsolutePath());
		// 정규 경로
		System.out.println("Canonical path = " + path.toRealPath());

		Stream<Path> pathStream = Files.list(path);
		List<Path> list = pathStream.toList();
		pathStream.close();

		for (Path p : list) {
			System.out.println((Files.isRegularFile(p) ? "F" : "D") + " | " + p.getFileName());
		}
	}
}
```

## Files로 문자 파일 읽기
```java
public class ReadTextFileV1 {
	private static final String PATH = "temp/hello2.txt";

	public static void main(String[] args) throws IOException {
		String writeString = "abc\n가나다";
		System.out.println(" == Write String ==");
		System.out.println(writeString);

		Path path = Path.of(PATH);

		//파일에 쓰기
		Files.writeString(path, writeString, StandardCharsets.UTF_8);
		//파일에서 읽기
		String readString = Files.readString(path, StandardCharsets.UTF_8);

		System.out.println("=== Read String ==");
		System.out.println(readString);


        // 스트림을 사용하여 한줄단위로 메모리에 올리고 처리할수 있다.
        Stream<String> lineStream = Files.lines(path, UTF_8);

		lineStream.forEach(line -> System.out.println(line));

		lineStream.close();

        // 한번에 메모리에 올려 사용하는 방식 => 스트림권장
        /*List<String> lines = Files.readAllLines(path, StandardCharsets.UTF_8);
		for (int i = 0; i < lines.size(); i++) {
			System.out.println((i+1) + ": " + lines.get(i));
		}*/
	}
}
```

## 파일 복사 최적화
```java
public class FileCopyMainV2 {
	public static void main(String[] args) throws IOException {
		long startTime = System.currentTimeMillis();

		FileInputStream fis = new FileInputStream("temp/copy.dat");
		FileOutputStream fos = new FileOutputStream("temp/copy/copy_new.dat");

        //1.
		fis.transferTo(fos);

		fis.close();
		fos.close();

        //2.
        Path source = Path.of("temp/copy.dat");
		Path target = Path.of("temp/copy_new.dat");

		Files.copy(source, target, StandardCopyOption.REPLACE_EXISTING);

		long endTime = System.currentTimeMillis();
		System.out.println("Time taken: " + (endTime - startTime) + "ms");
	}
}
```
# #️⃣ 생각해볼 문제
# 💫 학습자료