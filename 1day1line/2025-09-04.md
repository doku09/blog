# âœï¸ í•™ìŠµë‚´ìš©
## ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë¨6 - ìì›ì •ë¦¬3 
í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì†Œì¼“ì— ì ‘ê·¼ í• ë•Œ ì†Œì¼“ê³¼ inputstream, outputstreamì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ Session ê°ì²´ë¥¼ í™œìš©í•˜ì˜€ë‹¤. 
í•˜ë‚˜ì˜ ì„¸ì…˜ì´ ì¢…ë£Œë˜ë©´ try-with-resourceë¥¼ ì‚¬ìš©í•˜ì—¬ ìì›ì„ ì •ë¦¬í•œë‹¤. 
```java
try(
    Socket socket = new Socket("localhost", PORT);
    DataInputStream input = new DataInputStream(socket.getInputStream());
    DataOutputStream output = new DataOutputStream(socket.getOutputStream())) {...}
```
ê·¸ëŸ¬ë‚˜ ì™¸ë¶€ì—ì„œ ìì›ì„ ì •ë¦¬í•´ì•¼í•˜ëŠ” ìƒí™©ì´ë¼ë©´ try-with-resourceë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•œë‹¤. 
ì™¸ë¶€ì—ì„œ ìì›ì„ ì •ë¦¬í•˜ëŠ” ê²½ìš°ë€ ë§Œì•½ ê°ê°ì˜ ì„¸ì…˜ì´ ì•„ë‹Œ ì„œë²„ë¥¼ ì¢…ë£Œí•´ì•¼í•  ê²½ìš° ê°ê°ì˜ ì„¸ì…˜ì„ ëª¨ë‘ ì¢…ë£Œí•´ì•¼í•˜ëŠ”ë°, ì´ë•ŒëŠ” ì„¸ì…˜ì˜ ì˜ì§€ì™€ ìƒê´€ì—†ì´ ì¢…ë£Œí•´ì•¼í•œë‹¤. 
ì´ëŸ¬í•œ ì¢…ë£Œì²˜ë¦¬ë¥¼ í•˜ê¸°ìœ„í•´ SessionManagerë¥¼ ì‚¬ìš©í•œë‹¤. 
```java
// ë™ì‹œì„± ì²˜ë¦¬
public class SessionManagerV6 {

 private List<SessionV6> sessions = new ArrayList<>();

 public synchronized void add(SessionV6 session) {
    sessions.add(session);
 }

 public synchronized void remove(SessionV6 session) {
    sessions.remove(session);
 }

 public synchronized void closeAll() {
    for (SessionV6 session : sessions) {
    session.close();
    }
    sessions.clear();
 }
}
```
closeAll()ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  sessionì„ ë‹«ì•„ì£¼ëŠ” ê²ƒ ì²˜ëŸ¼, ì„¸ì…˜ì„ ì™¸ë¶€ì—ì„œë„ ì¢…ë£Œì‹œí‚¤ê¸° ìœ„í•´ try-with-resourceë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì„¸ì…˜ ë©¤ë²„ë³€ìˆ˜ë¡œ ìì›ì„ ë‘”ë‹¤.

```java
public class Session implements Runnable {
 private final Socket socket;
 private final DataInputStream input;
 private final DataOutputStream output;
 private final SessionManagerV6 sessionManager;
 private boolean closed = false;

 public Session(Socket socket, SessionManagerV6 sessionManager) throws
IOException {
    this.socket = socket;
    this.input = new DataInputStream(socket.getInputStream());
    this.output = new DataOutputStream(socket.getOutputStream());
    this.sessionManager = sessionManager;
    this.sessionManager.add(this);
 }
```
ì´ë ‡ê²Œ try-resourceë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì•¼ ì™¸ë¶€ì—ì„œë„ ìì›ì„ ì •ë¦¬í•  ìˆ˜ ìˆë‹¤!

# #ï¸âƒ£ ìƒê°í•´ë³¼ ë¬¸ì œ
# ğŸ’« í•™ìŠµìë£Œ