# 동시성 문제를 해결하기 위한 기술들
synchronized,ReentrantLock,컬렉션프레임워크에서 지원하는 ConcurrentXXX

## 동시성 문제 (Concurrency Issue)
- 여러 스레드가 동시에 공유 자원에 접근할 때 예상하지 못한 결과나 오류가 발생하는 문제입니다.

- 주로 레이스 컨디션 (Race Condition) 이라는 현상을 동반하며, 이는 여러 스레드가 동시에 자원에 접근하면서 순서가 엉키거나 상태가 일관되지 않게 되는 문제입니다.

## 레이스 컨디션(Race Condition)
- 여러 스레드가 동시에 공유 자원에 접근하고, 이 자원의 값을 변경하거나 읽을 때 순서에 의존하는 문제가 발생하는 현상.

- 자원의 상태가 예상한 대로 변하지 않게 되며, 이는 논리적 오류를 초래할 수 있습니다.

> **레이스 컨디션의 유래**
  >"Race"는 경주를 의미합니다. 즉, 여러 스레드(경주자가)가 공유 자원(결승선)에 먼저 도달하려고 경쟁을 벌이는 상황을 비유적으로 표현한 것입니다.  
> 경쟁 상태에서 중요한 점은 누가 먼저 도달하느냐입니다. 동시에 도달한 것처럼 보일 수도 있지만, 결과는 실행 순서에 따라 다를 수 있습니다.


## 동시성 제어 기법 세가지

  1. synchronized
     - 구현이 간단하다.
     - 락이 로직이 끝나면 자동으로 반환된다.
     - 공정하지 않음
     - block을 사용했을 때 timeout안됨, 락 상태 확인 불가함.
	 
  2. ReentrantLock
     - 락을 걸거나 해제하는 시점을 명확히 컨트롤해야할때
     - 특정시간만 대기하고 싶을때
     - 락 상태확인이나 공정성 설정이 필요할때
     - 세밀하게 임계영역을 지정할 수 있음
	 
  3. ConcurrentXXX 컬렉션 프레임워크
     - 유저 단위 분리:	ConcurrentHashMap은 key 단위 동기화 → 유저별로 병렬 처리 가능
     - 락 범위 최소화:	synchronized는 메서드 전체 락 → 병목 생길 수 있음
     - 테스트/실전 모두 적합:	compute()는 자바에서 공식적으로 안전한 병렬 수정 방식
     - 별도 락 객체 관리(Map<Long, Object> 등) 안 해도 됨
