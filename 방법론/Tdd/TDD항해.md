## 테스트(허 님)



테스트 주도 개발?
 테스트를 먼저 생각한다. 
 익숙하지 않다? 기능먼저짜. 이 기능은 이테스트를 통과해야된다를 먼저

 테스트 중심으로 프로그램을 설계한다.



서비스를 바꿨는데 스프링을 켜서 테스트한다? 
- 시간 낭비다

## 테스트 왜 중요할까 
- 변경이 용이하고 안정적으로 동작할 수 있는지 확인

## 테스트에도 비용이 들어간다. 
근데 요즘은 안들어감 왜 ? 코파일럿이 짜줌
근데 코파일럿이 테스트 코드작성할 수 있게 학습을 해줘야된다. 


## 테스트ㅡ 피라미드
- 손가락 비유 
  > 하나 잃어버리고 사자 손가락을 가져와서 이식하면 정상동작할까? 
  > A) 모른다. 각각 손가락 테스트(unit test)를 해도 통합테스트를 해야한다.
  > 검지접었을떄 엄지움직여? 이건 integration test

- 단위테스트를 많이할수록 통합테스트할떄 비용이 준다.
- 단위테스트 독립적인 객체를 위한 테스트

- 만약 A서비스가 B서비스를 알고잇으면 B서비스를 지워서 A서비스만 테스트할 수 도있도록한다. 
- 결합된 채로 테스트하는것을 통합테스트
- NestApplication 

## 통합테스트
- 상호작용 - 맞물려 잘 돌아가는지 확인

## End To end testing
외부에서 호출하는 것처럼 테스트 (필터,인터셉트까지 탈수있도록) 
테스트할 내용을 처음부터 끝까지 

## 의존성을 지워 - 테스트 더블
다른객체에 의해 노이즈가 생겨 테스트가 제대로 되지 않을 수 있다. 

미리 정해진 응답을 하는데 뭐에 대해서 응답할래?
## Mock
- 특정 기능에 대해 정해진 기능을 응답 (**아 모르겠고** 내가 말하면 너는 그렇게 대답해) - 입력과 상관없이 내가 시키는 대로 대답해
## stub 
특정 기능에 대해 

> 예) DB의 동작을 모르는데 DB를 흉내내고 싶어. 단발성 로직에서는 " 아 모르겠고" 가 가능하지만 유기적인 로직은 불가 이때는 Stub 가짜 객체를 직접 구현해야한다. 
> 이런 숫자가 들어가면 너는 이렇게 대답해 는 stub
> 왜? 다른 입력이 들어가면 대답을 안할거기 때문에 
### 결론은 가짜인게 중요하다

결제 API 호출하는 기능은 호출하는 것처럼 테스트해야한다. (실제로 돌리면 안된다.)
- 이럴때 테스트 더블을 사용 

### private함수는 어떻게 테스트하나?
- 정말 private해야하는가? 를 생각 

내 코드가 테스트 가능한지 의심해야한다.

### 강결합
- 정말 강결합이 되어야할까?

## 구체적이면 좋다.
분산환경 고려하지마라. (multi Instance,scale out등 고려하지마라)


## 궁금증
- 어떤 애플리케이션을 개발하든 프레임워크의 로우한 영역까지 알아야할까? 
- TFD? TDD안에 포함?

## 기본과제
- 테스트 대역

## 심화과제
- 동일한 사용자에대한 동시요청 
- 통합테스트
- 동시성 제어방식의 장/단점점

- PR에 고민한 포인트들 작성
